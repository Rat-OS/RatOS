"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([["9225"],{29729:function(e,i,n){n.r(i),n.d(i,{default:()=>c,frontMatter:()=>s,metadata:()=>r,assets:()=>a,toc:()=>l,contentTitle:()=>d});var r=JSON.parse('{"id":"boards/fysetc/spider-11","title":"Fysetc Spider v1.1","description":"Wiring","source":"@site/versioned_docs/version-1.2.x/boards/fysetc/spider-11.md","sourceDirName":"boards/fysetc","slug":"/boards/fysetc/spider-11","permalink":"/docs/1.2.x/boards/fysetc/spider-11","draft":false,"unlisted":false,"editUrl":"https://github.com/Rat-OS/RatOS/edit/v2.x/site/versioned_docs/version-1.2.x/boards/fysetc/spider-11.md","tags":[],"version":"1.2.x","frontMatter":{"sidebar_label":"Spider v1.1"},"sidebar":"docsSidebar","previous":{"title":"SKR Pro v1.2","permalink":"/docs/1.2.x/boards/btt/skr-pro-12"},"next":{"title":"Rat Rig V-Core 3","permalink":"/docs/1.2.x/printers/v-core-3"}}'),t=n("52676"),o=n("23663");let s={sidebar_label:"Spider v1.1"},d="Fysetc Spider v1.1",a={},l=[{value:"Wiring",id:"wiring",level:2},{value:"Connection to your Pi",id:"connection-to-your-pi",level:3},{value:"Firmware installation",id:"firmware-installation",level:2},{value:"Flash via SD Card (recommended)",id:"flash-via-sd-card-recommended",level:3},{value:"First time flashing via SSH(PuTTY)/USB",id:"first-time-flashing-via-sshputtyusb",level:3},{value:"Klipper Updates",id:"klipper-updates",level:3},{value:"Setup",id:"setup",level:2},{value:"ADXL345 Connection",id:"adxl345-connection",level:2},{value:"Undervoltage errors",id:"undervoltage-errors",level:3}];function h(e){let i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"fysetc-spider-v11",children:"Fysetc Spider v1.1"})}),"\n",(0,t.jsx)(i.h2,{id:"wiring",children:"Wiring"}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Fysetc Spider V1.1 Wiring Diagram",src:n(70807).Z+"",width:"1409",height:"1391"})}),"\n",(0,t.jsxs)(i.admonition,{type:"danger",children:[(0,t.jsxs)(i.mdxAdmonitionTitle,{children:["If you use the Ratrig endstop switches and cables, do ",(0,t.jsx)(i.strong,{children:"not"})," blindly plug them in to your Spider as doing this will short the board's 3.3V power rail."]}),(0,t.jsx)(i.p,{children:"You will probably have to swap the outer two wires (red and white) on the board end of the cable but double check to make sure."})]}),"\n",(0,t.jsx)(i.admonition,{type:"caution",children:(0,t.jsxs)(i.p,{children:["If you have been testing your Spider without the stepper drivers plugged in, there is a chance that you'll blow the 3.3V voltage regulator on the board if you do not discharge the capacitors before connecting the drivers. The lesson here is don't power up the Spider without the stepper drivers plugged in. Please read ",(0,t.jsx)(i.a,{href:"https://github.com/FYSETC/FYSETC-SPIDER/blob/main/Spider%203.3v%20issue.md",children:"https://github.com/FYSETC/FYSETC-SPIDER/blob/main/Spider%203.3v%20issue.md"})]})}),"\n",(0,t.jsx)(i.admonition,{type:"caution",children:(0,t.jsxs)(i.p,{children:["Before connecting a probe ",(0,t.jsx)(i.strong,{children:"check"})," the probe voltage selector jumper."]})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Fysetc Spider V1.1 Probe Voltage Selector",src:n(30424).Z+"",width:"872",height:"392"})}),"\n",(0,t.jsx)(i.h3,{id:"connection-to-your-pi",children:"Connection to your Pi"}),"\n",(0,t.jsx)(i.p,{children:"While the Spider can connect to your Pi via it's UART this is not\nsupported by V-Core OS as standard and will require manual firmware\nconfiguration."}),"\n",(0,t.jsx)(i.p,{children:"The normal V-Core OS connection is via USB as this allows new versions\nof Klipper to be uploaded without needing an SDCard. You can, of\ncourse, power the Pi from your Spider whichever form of connection you\nuse or if you use a dedicated Pi Power Supply you can shut down your\nSpider while leaving the Pi running."}),"\n",(0,t.jsx)(i.h2,{id:"firmware-installation",children:"Firmware installation"}),"\n",(0,t.jsx)(i.p,{children:"For the first time install of Klipper onto the Spider; there are two\nmethods. With an SD Card or via SSH(PuTTY)/USB."}),"\n",(0,t.jsx)(i.p,{children:"The SD Card method is suggested as being the\neasiest."}),"\n",(0,t.jsx)(i.h3,{id:"flash-via-sd-card-recommended",children:"Flash via SD Card (recommended)"}),"\n",(0,t.jsxs)(i.p,{children:["Download the ",(0,t.jsx)(i.code,{children:"firmware-fysetc-spider.bin"})," from the ",(0,t.jsx)(i.code,{children:"firmware_binaries"})," folder found on the Machine page of ",(0,t.jsx)(i.a,{href:"http://RatOS.local/",children:"Mainsail"}),", copy it onto the SD card that goes into your control board and call it ",(0,t.jsx)(i.code,{children:"firmware.bin"}),", then insert the SD card in to the control board. Here are the steps in chronological order:"]}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["Navigate to ",(0,t.jsx)(i.a,{href:"http://RatOS.local/",children:"http://RatOS.local/"})]}),"\n",(0,t.jsx)(i.li,{children:"Open Machine page"}),"\n",(0,t.jsxs)(i.li,{children:["Open ",(0,t.jsx)(i.code,{children:"firmware_binaries"})," folder"]}),"\n",(0,t.jsxs)(i.li,{children:["Download ",(0,t.jsx)(i.code,{children:"firmware-fysetc-spider.bin"})]}),"\n",(0,t.jsx)(i.li,{children:"Format the sd card for your board to FAT16 (sometimes just called FAT), or FAT32 with a clustersize of 8kb or 4kb."}),"\n",(0,t.jsxs)(i.li,{children:["Copy ",(0,t.jsx)(i.code,{children:"firmware-fysetc-spider.bin"})," onto the sd card for your board"]}),"\n",(0,t.jsxs)(i.li,{children:["Rename ",(0,t.jsx)(i.code,{children:"firmware-fysetc-spider.bin"})," to ",(0,t.jsx)(i.code,{children:"firmware.bin"}),". Please be wary of file extensions! If the file doesn't already show .bin, don't add it!"]}),"\n",(0,t.jsx)(i.li,{children:"Safely eject the SD card through your operating system."}),"\n",(0,t.jsx)(i.li,{children:"Physically take out the sd card and insert it into your control board."}),"\n",(0,t.jsx)(i.li,{children:"Power cycle your printer or control board. Remember to shut the pi down properly before you cut power to your Pi (you can do that through Mainsail using the dropdown menu in the top right corner). The upload should take a few seconds and a LED by the SDCard slot should flash while this is happening."}),"\n",(0,t.jsxs)(i.li,{children:["Verify that the firmware has been flashed and ",(0,t.jsx)(i.strong,{children:"Do not put the sd card back in the board after successful flashing"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["For more information; this is documented on the Fysetc pages:\n",(0,t.jsx)(i.a,{href:"https://github.com/FYSETC/FYSETC-SPIDER#42-Klipper",children:"https://github.com/FYSETC/FYSETC-SPIDER#42-Klipper"})]}),"\n",(0,t.jsx)(i.admonition,{type:"tip",children:(0,t.jsxs)(i.p,{children:["If you don't know how to make Windows Explorer show file extensions, see ",(0,t.jsx)(i.a,{href:"https://www.howtogeek.com/205086/beginner-how-to-make-windows-show-file-extensions/",children:"this article on HowToGeek"})]})}),"\n",(0,t.jsx)(i.admonition,{type:"caution",children:(0,t.jsx)(i.p,{children:"If you have an ADXL345 connected to your Spider as shown below, you may need to disconnect it from your Spider to avoid conflicts with the SD Card while loading the firmware."})}),"\n",(0,t.jsx)(i.h3,{id:"first-time-flashing-via-sshputtyusb",children:"First time flashing via SSH(PuTTY)/USB"}),"\n",(0,t.jsx)(i.p,{children:"While the SD Card method described above is the easiest, users that are\ncomfortable with SSH/PuTTY may prefer this more advanced method."}),"\n",(0,t.jsxs)(i.p,{children:["Fysetc provide instructions on installing Klipper here:\n",(0,t.jsx)(i.a,{href:"https://github.com/FYSETC/FYSETC-SPIDER#42-Klipper",children:"https://github.com/FYSETC/FYSETC-SPIDER#42-Klipper"})," but some parts of\nthat are less clear than one might wish so here is the sequence that\nworked for the author."]}),"\n",(0,t.jsx)(i.p,{children:"Make sure your board is connected to the Pi (USB-C on the Spider, USB-A\non the Pi). Connect with SSH (PuTTy for Windows users) to the Pi (login\npi, password raspberry if you did not change the defaults)."}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Fysetc Spider V1.1 BT0 Jumper",src:n(10805).Z+"",width:"558",height:"406"})}),"\n",(0,t.jsx)(i.p,{children:"Connect a jumper between 3.3V and BT0 on the Spider as shown above."}),"\n",(0,t.jsx)(i.p,{children:"Press the reset button on the Spider."}),"\n",(0,t.jsx)(i.p,{children:"On the Pi, run the following command:"}),"\n",(0,t.jsx)(i.p,{children:"dfu-util --list"}),"\n",(0,t.jsx)(i.p,{children:"You should see a list of DFU devices. This is your Spider ready to have\nthe firmware uploaded."}),"\n",(0,t.jsxs)(i.p,{children:["Build the firmware which is covered here: ",(0,t.jsx)(i.a,{href:"/docs/1.2.x/manual-firmware-compilation",children:"Manual Firmware Compilation"})]}),"\n",(0,t.jsx)(i.p,{children:"Once the firmware is built on the Pi run:"}),"\n",(0,t.jsxs)(i.p,{children:["sudo service klipper stop\ndfu-util -a 0 -s 0x08008000",":leave"," -D ~/klipper/out/klipper.bin"]}),"\n",(0,t.jsx)(i.p,{children:"You should see the firmware being written to your Spider."}),"\n",(0,t.jsx)(i.p,{children:"Now remove the jumper between 3.3V and BT0 on the Spider. Press the reset button on the Spider."}),"\n",(0,t.jsx)(i.p,{children:'Run "lsusb" on the Pi and you should see a device by the name "OpenMoko, Inc.". This is your Spider running Klipper.'}),"\n",(0,t.jsx)(i.p,{children:'run the command "sudo service klipper start". RatOS should now be able to communicate with your Spider.'}),"\n",(0,t.jsx)(i.h3,{id:"klipper-updates",children:"Klipper Updates"}),"\n",(0,t.jsx)(i.admonition,{title:"Automatic firmware updates",type:"info",children:(0,t.jsx)(i.p,{children:"RatOS automatically flashes the newest firmware to your\nSpider v1.1 when klipper is updated (if the klipper firmware has previously been flashed).\nYou shouldn't need any of the steps below unless that fails."})}),"\n",(0,t.jsx)(i.p,{children:"Sometimes klipper makes changes to the microcontroller code and thus\nyour Spider need to be reflashed with new firmware. You can do that in 2\nways."}),"\n",(0,t.jsx)(i.p,{children:"The updates can be installed with an SD Card (same method as\nthe first install described above) or over a Pi/Spider USB connection from RatOS\nusing SSH(PuTTY) and the provided\n~/klipper_config/config/boards/fysetc-spider/make-and-flash-mcu.sh\ncommand so you don't need to fiddle around with SD Cards."}),"\n",(0,t.jsx)(i.h2,{id:"setup",children:"Setup"}),"\n",(0,t.jsxs)(i.p,{children:["If you're going through initial setup please continue in the ",(0,t.jsx)(i.a,{href:"/docs/installation#setting-up-your-printer",children:"installation guide"})]}),"\n",(0,t.jsx)(i.h2,{id:"adxl345-connection",children:"ADXL345 Connection"}),"\n",(0,t.jsx)(i.p,{children:"In your printer.cfg uncomment the following:"}),"\n",(0,t.jsx)(i.h1,{id:"for-adxl345",children:"For ADXL345"}),"\n",(0,t.jsx)(i.p,{children:"[resonance_tester]\naccel_chip: adxl345"}),"\n",(0,t.jsx)(i.h1,{id:"change-the-following-to-the-centre-of-your-bed",children:"Change the following to the centre of your bed."}),"\n",(0,t.jsx)(i.p,{children:"probe_points: 200,200,20"}),"\n",(0,t.jsx)(i.p,{children:"Connect the ADXL345 to the Spider like so:"}),"\n",(0,t.jsx)(i.p,{children:"Spider         ADXL345\n5V             VCC\nGND            GND\nMISO           SDO\nMOSI           SDA\nSCK            SCL\nCS             CS"}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Fysetc Spider V1.1 ADXL Wiring",src:n(22132).Z+"",width:"1123",height:"794"})}),"\n",(0,t.jsxs)(i.p,{children:["See the Fysetc wiring plan for details: ",(0,t.jsx)(i.a,{href:"https://github.com/FYSETC/FYSETC-SPIDER/blob/main/images/Spider_V1.0_Pinout.jpg",children:"https://github.com/FYSETC/FYSETC-SPIDER/blob/main/images/Spider_V1.0_Pinout.jpg"})]}),"\n",(0,t.jsx)(i.admonition,{type:"info",children:(0,t.jsx)(i.p,{children:"You might have to disconnect the ADSL345 from your Spider while you are uploading firmware using the SD Card."})}),"\n",(0,t.jsx)(i.h3,{id:"undervoltage-errors",children:"Undervoltage errors"}),"\n",(0,t.jsx)(i.p,{children:"If you are using the Fysetc TMC2209 step-sticks and you're getting Undervoltage errors from the stepper drivers make sure to either fully disable or enable stealthchop."}),"\n",(0,t.jsx)(i.p,{children:'To completely disable stealthchop add this to the "### USER OVERRIDES" section of printer.cfg for each driver on your printer:'}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-properties",children:"    [tmc2209 stepper_x]\n    stealthchop_threshold: 0\n"})}),"\n",(0,t.jsx)(i.p,{children:"You can also enable stealthchop instead, like so:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-properties",children:"    [tmc2209 stepper_x]\n    stealthchop_threshold: 9999999\n"})}),"\n",(0,t.jsxs)(i.p,{children:["Klipper recommends using either stealthchop or spreadcycle for TMC drivers: ",(0,t.jsx)(i.a,{href:"https://www.klipper3d.org/TMC_Drivers.html",children:"https://www.klipper3d.org/TMC_Drivers.html"})]})]})}function c(e={}){let{wrapper:i}={...(0,o.a)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},10805:function(e,i,n){n.d(i,{Z:function(){return r}});let r=n.p+"assets/images/BT0-jumper-2691e20534a99613dea48ee56d19f43a.png"},30424:function(e,i,n){n.d(i,{Z:function(){return r}});let r=n.p+"assets/images/Probe_Voltage-f5ef31336c3ee51b576b3f55318b9919.png"},22132:function(e,i,n){n.d(i,{Z:function(){return r}});let r=n.p+"assets/images/SpiderADXL-Wiring-3965455180ee37baa4ec3accf755a611.png"},70807:function(e,i,n){n.d(i,{Z:function(){return r}});let r=n.p+"assets/images/spider-11-wiring-7416e4d9b382fa28b7f1eb62a61a8e99.png"},23663:function(e,i,n){n.d(i,{Z:function(){return d},a:function(){return s}});var r=n(75271);let t={},o=r.createContext(t);function s(e){let i=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(o.Provider,{value:i},e.children)}}}]);